# NIHO鎌倉 利用状況分析 v2 - CSVアップロード版

## 🚀 **v2の特徴**

### **📤 CSVファイルアップロード機能**
- **ドラッグ&ドロップ対応**: CSVファイルを直接エリアにドロップ
- **リアルタイム分析**: アップロード後即座にデータ分析・表示
- **Safari/スマホ対応**: 全ブラウザで動作確認済み

### **📊 分析機能（v1と同等）**
- **期間切替**: 6ヶ月ビュー / 7月ビュー
- **ユーザーセグメント**: ヘビー・レギュラー・ライト・トライアル
- **詳細テーブル**: 全ユーザーの利用データ表示
- **インタラクティブグラフ**: Chart.js使用

## 📋 **使用方法**

### **1. CSVファイル準備**
必要なカラム：
- `customerName`: ユーザー名
- `checkinTime`: チェックイン日時
- `stayTime`: 滞在時間（HH:MM:SS形式）

### **2. アップロード**
1. ページにアクセス
2. CSVファイルを選択またはドラッグ&ドロップ
3. 自動的にデータ分析が開始

### **3. 分析結果確認**
- **統計**: 期間、ユーザー数、平均値
- **散布図**: 利用頻度 vs 利用時間
- **セグメント分析**: ユーザー分類
- **詳細テーブル**: 全ユーザーデータ

## 🔧 **技術仕様**

### **使用ライブラリ**
- **Chart.js**: グラフ描画
- **PapaParse.js**: CSV解析
- **Pure JavaScript**: フレームワーク不使用

### **対応ブラウザ**
- ✅ Chrome
- ✅ Safari（Mac/iPhone）
- ✅ Firefox
- ✅ Edge

### **モバイル対応**
- レスポンシブデザイン
- タッチ操作最適化
- パフォーマンス調整（上位100ユーザー表示）

## 📈 **v1との違い**

| 機能 | v1（埋め込み版） | v2（アップロード版） |
|------|----------------|-------------------|
| データ更新 | ❌ 固定データ | ✅ CSVアップロード |
| 最新データ対応 | ❌ 手動更新必要 | ✅ リアルタイム対応 |
| 容量 | 重い（280KB） | 軽い（40KB） |
| 使いやすさ | 簡単 | CSVアップロード必要 |

## 🎯 **推奨用途**

### **v1（埋め込み版）推奨**
- **固定レポート**: 決まった期間の分析結果共有
- **プレゼンテーション**: URLリンクのみで即座に表示
- **アーカイブ**: 過去データの保存・共有

### **v2（アップロード版）推奨**
- **日常業務**: 定期的なデータ分析
- **最新データ確認**: リアルタイムでの状況把握
- **データ更新**: 新しいCSVファイルでの継続分析

## 💾 **GitHub Pages URL**

```
https://takuyatakahamat.github.io/niho-analysis/v2/
```

## 🛠 **トラブルシューティング**

### **CSVアップロードエラー**
1. ファイル形式を確認（.csv）
2. 必要なカラムがあるか確認
3. 文字エンコーディング確認（UTF-8推奨）

### **データが表示されない**
1. ブラウザのコンソールでエラー確認
2. CSVデータの形式確認
3. 日付形式の確認

### **Safari/スマホで動作しない**
1. ブラウザキャッシュクリア
2. JavaScript有効化確認
3. 最新ブラウザへの更新

---

**作成者**: AI Assistant  
**最終更新**: 2025年8月4日  
**バージョン**: v2.0.0